{% extends "survey/base.html" %}
{% load static %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/cross_systems_styles.css' %}">
    <script src="{% static 'js/cross_systems_script.js' %}"></script>
{% endblock %}

{% block content %}
<h1 class="page-title">Cross-Systems Perspectives</h1>

<div class="info-box">
    <p>This final section focuses on the **coordination and integration** of policies and data between the two main domains: **Tax (IRIS)** and **Customs (WeBOC/PSW)**.</p>
    <p>Your feedback here is critical for identifying systemic friction points across FBR's operations.</p>
</div>

{% if error %}
<div class="error-box" id="error-box" role="alert">
    <div class="error-icon">‚ö†Ô∏è</div>
    <div class="error-message">{{ error }}</div>
</div>
{% endif %}

<form method="POST" id="crossSystemsForm" novalidate>
    {% csrf_token %}

    <div class="section">
        <h2 class="section-title">üîó Tax-Customs Integration and Policy Alignment</h2>
        <p class="section-description">Please rate your experiences regarding the consistency and coordination between FBR's Tax and Customs functions.</p>

        <div class="question-card">
            <div class="question-text">XS1. When handling matters that span both Customs and Tax (e.g., trade transactions subject to sales tax/FED), how often do you encounter **discrepancies, inconsistencies, or delays** in the data shared or reconciled between the two systems (IRIS vs. WeBOC/PSW)?</div>
            <div class="radio-group compact">
                {% for value, label in xs1_options %}
                <div class="radio-item">
                    <input type="radio" id="xs1_{{ value }}" name="xs1_data_discrepancy" value="{{ value }}" required
                           {% if cross_systems_answers.xs1_data_discrepancy == value %}checked{% endif %}
                           aria-required="true">
                    <label for="xs1_{{ value }}">{{ label }}</label>
                </div>
                {% endfor %}
            </div>
            <div id="xs1_error_inline" class="validation-error-inline" style="display: none;" role="alert">
                ‚ö†Ô∏è Please select an option for XS1.
            </div>
        </div>

        <div class="question-card">
            <div class="question-text">XS2. How consistent is the **legal and policy interpretation** applied by FBR in cases that overlap Tax and Customs jurisdictions (e.g., valuation rules, classification, exemptions)?</div>
            <div class="radio-group compact">
                {% for value, label in xs2_options %}
                <div class="radio-item">
                    <input type="radio" id="xs2_{{ value }}" name="xs2_policy_consistency" value="{{ value }}" required
                           {% if cross_systems_answers.xs2_policy_consistency == value %}checked{% endif %}
                           aria-required="true">
                    <label for="xs2_{{ value }}">{{ label }}</label>
                </div>
                {% endfor %}
            </div>
            <div id="xs2_error_inline" class="validation-error-inline" style="display: none;" role="alert">
                ‚ö†Ô∏è Please select an option for XS2.
            </div>
        </div>
    </div>

    <div class="buttons">
        <button type="button" class="btn btn-back" onclick="handleBackNavigation('{% url 'survey:role_specific_questions' %}')">‚Üê Back</button>
        <button type="button" class="btn btn-skip" onclick="skipSection('{% url 'survey:final_remarks' %}')">Skip This Section</button>
        <button type="submit" class="btn btn-next">Next ‚Üí</button>
    </div>
</form>
{% endblock %}